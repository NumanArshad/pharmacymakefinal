@model IEnumerable<PharmacyManagementSystem.Models.Staff>

@{
    ViewBag.Title = "Index";

}

@*

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Username)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Phone)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Address)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Username)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Phone)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table>
*@

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
<link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/start/jquery-ui.css"
      rel="stylesheet" type="text/css" />
<div class="panel panel-default" style="margin-top:20px;box-shadow:2px 2px 5px grey">
    <div class="panel-heading">

        <i class="fa fa-medkit"></i>
        Medicines
    </div>
</div>

<div id='myModal' class='modal'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div id='myModalContent'></div>
        </div>
    </div>

</div>



<button type="button" class="btn btn-success anchorStaff"  data-toggle="modal" data-target="#addModalLong" style="margin-bottom:10px;color:white;box-shadow:2px 2px 5px grey">
    <span class="glyphicon glyphicon-plus-sign"></span>Add Staff
</button>
@*<a href="javascript:void(0);" class="anchorStaff">Add Staff</a>*@


<div class="row" style="margin-bottom:10px">

    <div class="col-lg-4 col-lg-offset-8">
        <div class="input-group" style="align-content:flex-end">
            <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
            <input id="SSearch" type="text" class="form-control" name="email" placeholder="Search" />
        </div>
    </div>

</div>
<h3>@ViewBag.Message</h3>
<div class="container">
    <select id="SearchBy">
        <option value="Name">
            Name
        </option>
        <option value="Username">Username</option>

    </select>
    @Html.TextBox("Search")
    <input type="submit" id="SearchBtn" value="Search" />
</div>
<br />
<br />

<div class="panel panel-default">
    <table class="table table-bordered table-hover table-responsive" style="box-shadow:2px 2px 5px grey;text-align:center">
        <thead style="background-color:lightgrey">
            <tr>
                <th style="text-align:center">
                    @Html.DisplayNameFor(model => model.Name)
                </th>
                <th style="text-align:center">
                    @Html.DisplayNameFor(model => model.Username)
                </th>
                <th style="text-align:center">
                    @Html.DisplayNameFor(model => model.Email)
                </th>
                <th style="text-align:center">
                    @Html.DisplayNameFor(model => model.Phone)
                </th>
                <th style="text-align:center">
                    @Html.DisplayNameFor(model => model.Address)
                </th>
            
                <th style="text-align:center">Options</th>
            </tr>
        </thead>
        <tbody id="DataSearching">
            @foreach (var item in Model)
            {

                <tr class="Search">
                    <td>
                    @Html.DisplayFor(modelItem => item.Name)
                     
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Username)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Email)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Phone)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.Address)
                    </td>
                   <td>
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12">

                                    <button type="button" class="btn btn-success btn-xs" data-id="@item.Email" id="editstaff" data-toggle="modal" data-target="#editModalLong">
                                        <span class="glyphicon glyphicon-edit"></span> Edit
                                    </button>
                                    <a href="javascript:void(0);" class="editStaff" data-id="@item.Email">Edit</a>
                                </div>
                                <div class="col-lg-12" style="margin-top:5px">
                                    <button type="button" class="btn btn-danger btn-xs" onclick="confirmDelete();"><span class="glyphicon glyphicon-trash"></span>Delete</button>
                                </div>

                                <div class="col-lg-12" style="margin-top:5px">
                                   
                                    <a href="javascript:void(0);" class="anchorDetail" data-id="@item.Name">Details</a>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>



            }
        </tbody>

    </table>
</div>

<div>@Html.Raw(TempData["msg"])</div>
@section scripts {
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script>
    $(document).ready(function () {
        //  $("#SearchBtn").click(function () {
        $("#Search").keyup(function () {
            var SearchBy = $("#SearchBy").val();
            var SearchValue = $("#Search").val();
            var SetData = $("#DataSearching");
            SetData.html("");
            $.ajax({
                type: "post",
                url: "/Staff/GetSearchingData?SearchBy=" + SearchBy + "&SearchValue=" + SearchValue,
                contentType: "html",
                success: function (result) {
                    if (result.length == 0) {
                        SetData.append('<tr style="color:red"><td colspan="6">No Match Data</td></tr>')
                    }
                    else {
                        $.each(result, function (index, value) {
                            var Data = "<tr>" +
                             "<td>" + value.Name + "</td>" +
                            "<td>" + value.Username + "</td>" +
                             "<td>" + value.Email + "</td>" +
                              "<td>" + value.Phone + "</td>" +
                               "<td>" + value.Address + "</td>" +

                               "</tr>";

                            SetData.append(Data);
                        });
                    }
                }
            });

        });
    });
</script>


    

<script>

        $(document).ready(function () {
            function Contains(text_one, text_two) {
                if (text_one.indexOf(text_two) != -1) {
                    return true;
                }
            }
            $("#SSearch").keyup(function () {
                var searchText = $("#SSearch").val().toLowerCase();
               
                $(".Search").each(function () {
                    if (!Contains($(this).text().toLowerCase(), searchText)) {
                        $(this).hide();
                    }
                    else {
                        $(this).show();
                    }
                });
            });

        });
    </script>

    
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script>
        var TeamDetailPostBackURL = '/Staff/myModal';
        $(function () {
            $(".anchorDetail").click(function () {
                var $buttonClicked = $(this);
                var id = $buttonClicked.attr('data-id');
                $.ajax({
                    type: "GET",
                    url: TeamDetailPostBackURL,
                    contentType: "application/json; charset=utf-8",
                    data: { "Id": id },
                    datatype: "json",
                    success: function (data) {
                        $('#myModalContent').html(data);
                        $('#myModal').modal('show');

                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
            });
        });
        

        var AddStaffPostBackURL = '/Staff/addStaff';
        $(function () {
            $(".anchorStaff").click(function () {
                var $buttonClicked = $(this);
             //  var id = $buttonClicked.attr('data-id');
                $.ajax({
                    type: "GET",
                    url: AddStaffPostBackURL,
                    contentType: "application/json; charset=utf-8",
              //      data: { "Id": id },
                    datatype: "json",
                    success: function (data) {
                        $('#modalBody').html(data);
                        $('#addModalLong').modal('show');

                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
            });
        });



        var editStaffPostBackURL = '/Staff/Edit';
        $(function () {
            $(".editStaff").click(function () {
                var $buttonClicked = $(this);
                var id = $buttonClicked.attr('data-id');
                $.ajax({
                    type: "GET",
                    url: editStaffPostBackURL,
                    contentType: "application/json; charset=utf-8",
                       data: { "Id": id },
                    datatype: "json",
                    success: function (data) {
                        $('#edit_body').html(data);
                        $('#editModalLong').modal('show');

                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
            });
        });
       


    </script>
    }
<!-- add medicine button Modal -->
<div class="modal fade" id="addModalLong" tabindex="-1" role="dialog" aria-labelledby="addModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color:darkcyan">
                <div class="container" style="font-size:20px;color:white">
                    <span class="glyphicon glyphicon-edit"></span>  Add Staff

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" style="color:black">&times;</span>
                    </button>
                </div>

            </div>
            <div class="modal-body" id="modalBody">

              @*<div class="row">
    <div class="col-sm-12">Name</div>
    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
    <div class="col-sm-12">Username</div>
    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
    <div class="col-sm-12">Email</div>
    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
    <div class="col-sm-12">Phone</div>
    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
    <div class="col-sm-12">Address</div>
    <div class="col-lg-12"><input type="text" style="width:100%" /></div>  </div>

                @Html.Partial("InModal",new ViewDataDictionary());*@
                 

               
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
            </div>
        </div>
    </div>
</div>




<!-- Edit button Modal -->
<div class="modal fade" id="editModalLong" tabindex="-1" role="dialog" aria-labelledby="editModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color:darkcyan">
                <div class="container" style="font-size:20px;color:white">
                    <span class="glyphicon glyphicon-edit"></span>  Edit Staff

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" style="color:black">&times;</span>
                    </button>
                </div>

            </div>
            <div class="modal-body" id="edit_body">

              @*  <div class="row">
                    <div class="col-sm-12">Name</div>
                    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
                    <div class="col-sm-12">Username</div>
                    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
                    <div class="col-sm-12">Email</div>
                    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
                    <div class="col-sm-12">Phone</div>
                    <div class="col-lg-12"><input type="text" style="width:100%" /></div>
                    <div class="col-sm-12">Address</div>
                    <div class="col-lg-12"><input type="text" style="width:100%" /></div>


                </div>*@
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
            </div>
        </div>
    </div>
</div>


<script>
    function confirmDelete() {
        confirm("Are u sure u want to selected delete staff?");
    }
</script>